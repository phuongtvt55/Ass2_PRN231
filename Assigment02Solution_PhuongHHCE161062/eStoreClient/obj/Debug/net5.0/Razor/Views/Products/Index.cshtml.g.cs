#pragma checksum "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\Products\Index.cshtml" "{8829d00f-11b8-4213-878b-770e8597ac16}" "c06013c49bc18e93272c8cce5caa5f79945eb3a09d18995f7e83669f20b11ed4"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Products_Index), @"mvc.1.0.view", @"/Views/Products/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using global::System;
    using global::System.Collections.Generic;
    using global::System.Linq;
    using global::System.Threading.Tasks;
    using global::Microsoft.AspNetCore.Mvc;
    using global::Microsoft.AspNetCore.Mvc.Rendering;
    using global::Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\_ViewImports.cshtml"
using eStoreClient;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\_ViewImports.cshtml"
using eStoreClient.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA256", @"c06013c49bc18e93272c8cce5caa5f79945eb3a09d18995f7e83669f20b11ed4", @"/Views/Products/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA256", @"992b5e1014b2731fbf132927427496740e0e3f1daac3a249f5cf6366a5c45c43", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Products_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    #nullable disable
    {
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("<h4 class=\"text text-danger\">");
#nullable restore
#line 1 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\Products\Index.cshtml"
                        Write(TempData["errorMessage"]);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h4>\r\n");
#nullable restore
#line 2 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\Products\Index.cshtml"
 if(User.IsInRole("Admin")){

#line default
#line hidden
#nullable disable
            WriteLiteral("    <input id=\"role\" value=\"Admin\" type=\"hidden\"/>\r\n");
#nullable restore
#line 4 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\Products\Index.cshtml"
}else{

#line default
#line hidden
#nullable disable
            WriteLiteral("    <input id=\"role\" value=\"User\" type=\"hidden\"/>\r\n");
#nullable restore
#line 6 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\Products\Index.cshtml"
}

#line default
#line hidden
#nullable disable
            WriteLiteral("<div class=\"container\">  \r\n        <h2>Product Record</h2>\r\n");
#nullable restore
#line 9 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\Products\Index.cshtml"
     if (User.IsInRole("Admin"))
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <button type=\"button\" class=\"btn btn-primary\" data-toggle=\"modal\" data-target=\"#myModal\" onclick=\"clearTextBox();\">Add New Product</button>\r\n        <br />\r\n        <br />\r\n");
#nullable restore
#line 14 "D:\PRN231_PE_PhuongHHCE161062\Assigment02Solution_PhuongHHCE161062\eStoreClient\Views\Products\Index.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    <table class=""table table-bordered table-hover"">  
            <thead>  
                <tr>  
                    <th>  
                        Product Name  
                    </th>  
                    <th>  
                        Weight  
                    </th>  
                    <th>  
                        Unit Price  
                    </th>
                    <th>
                        Units In Stock
                    </th>
                    <th>  
                        CategoryName  
                    </th>  
                    <th>  
                        Action  
                    </th>  
                </tr>  
            </thead>  
            <tbody class=""tbody"">  
  
            </tbody>  
        </table>  
    </div>  
    <div class=""modal fade"" id=""myModal"" tabindex=""-1"" role=""dialog"" aria-labelledby=""myModalLabel"" aria-hidden=""true"">  
        <div class=""modal-dialog"">  
            <div class=""modal-content"">  
       ");
            WriteLiteral("         <div class=\"modal-header\">  \r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\">Ã—</button>  \r\n                </div>  \r\n                <div class=\"modal-body\">  \r\n                    ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "c06013c49bc18e93272c8cce5caa5f79945eb3a09d18995f7e83669f20b11ed46685", async() => {
                WriteLiteral(@"  
                        <div class=""form-group"">  
                            <label for=""ProductID"">ID</label>  
                            <input type=""text"" class=""form-control"" id=""ProductID"" placeholder=""Id"" disabled=""disabled""/>  
                        </div>  
                        <div class=""form-group"">  
                            <label for=""ProductName"">Name</label>  
                            <input type=""text"" class=""form-control"" id=""Name"" placeholder=""Name""/>
                        </div>
                        <div class=""form-group"">
                            <label for=""Weight"">Weight</label>
                            <input type=""text"" class=""form-control"" id=""Weight"" placeholder=""Weight"" />
                        </div>
                        <div class=""form-group"">
                            <label for=""Price"">Unit Price</label>
                            <input type=""text"" class=""form-control"" id=""Price"" placeholder=""Unit Price"" />
               ");
                WriteLiteral(@"         </div>
                        <div class=""form-group"">
                        <label for=""UnitsInStock"">UnitsInStock</label>
                            <input type=""text"" class=""form-control"" id=""UnitsInStock"" placeholder=""UnitsInStock"" />  
                        </div>  
                        
                        <div class=""form-group"">                            
                            <label for=""CategoryName"">CategoryName</label>
                            <select class=""dropdownCate form-control"" id=""CateName"">
                            </select>                              
                        </div>  
                    ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"  
                </div>  
                <div class=""modal-footer"">  
                    <button type=""button"" class=""btn btn-primary"" id=""btnAdd"" onclick=""return Add();"">Add</button>  
                    <button type=""button"" class=""btn btn-primary"" id=""btnUpdate"" style=""display:none;"" onclick=""Update();"">Update</button>  
                    <button type=""button"" class=""btn btn-default"" data-dismiss=""modal"">Close</button>  
                </div>  
            </div>  
        </div>          
    </div>  

    <style>
        .img-fit{
            width: 30px;
            height: 30px;
        }
    </style>

");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <script type=""text/javascript"">
        //Load Data in Table when documents is ready
        $(document).ready(function () {
            loadData();
            loadCate();
        });

        //Load Data function
        function loadData() {
            var role = $('#role').val();
            $.ajax({
                url: ""https://localhost:44307/api/ProductAPI"",
                type: ""GET"",
                contentType: ""application/json;charset=utf-8"",
                dataType: ""json"",
                success: function (result) {
                    var html = '';
                    $.each(result, function (key, item) {
                        console.log(role);
                        html += '<tr>';
                        html += '<td>' + item.productName + '</td>';
                        html += '<td>' + item.weight + '</td>';
                        html += '<td>' + item.unitPrice + '</td>';
                        html += '<td>' + item.unitslnStock + '</td>';
       ");
                WriteLiteral(@"                 html += '<td>' + item.category.categoryName + '</td>';
                        if (role == ""Admin"") {
                            html += '<td><a href=""#"" onclick=""return getbyID(' + item.productId + ')""><img class=""img-fit"" src=""img/changes.png""/></a>  <a href=""#"" onclick=""Delele(' + item.productId + ')""><img class=""img-fit"" src=""img/delete.png""/></a></td>';
                        } else {
                            html += '<td><a href=""Orders/AddToCart/' + item.productId + '"" class=""btn btn-sm text-dark p-0 ml-4""><i class=""fas fa-shopping-cart text-primary mr-1""></i></a></td>'
                        }
                        html += '</tr>';
                    });
                    $('.tbody').html(html);
                    
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }

        function loadCate() {
            $.ajax({
                url: ""htt");
                WriteLiteral(@"ps://localhost:44307/api/ProductAPI/GetCategory"",
                type: ""GET"",
                contentType: ""application/json;charset=utf-8"",
                dataType: ""json"",
                success: function (result) {
                    var html = '';
                    var count = 0;
                    $.each(result, function (key, item) {
                        html += '<option value=' + item.categoryId + '>' + item.categoryName + '</option>';
                    });
                    $('.dropdownCate').html(html);
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }

        //Add Data Function
        function Add() {
            var res = validate();
            if (res == false) {
                return false;
            }
            var proObj = {
                //ProductID: $('#ProductID').val(),
                productName: $('#Name').val(),
         ");
                WriteLiteral(@"       Weight: $('#Weight').val(),
                UnitslnStock: $('#UnitsInStock').val(),
                UnitPrice: $('#Price').val(),
                CategoryId: $('#CateName').val(),
            };
            $.ajax({
                url: ""https://localhost:44307/api/ProductAPI"",
                data: JSON.stringify(proObj),
                type: ""POST"",
                contentType: ""application/json;charset=utf-8"",
                dataType: ""json"",
                success: function (result) {    
                    loadData();
                    $('#myModal').modal('hide');
                    
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }

        //Function for getting the Data Based upon Employee ID
        function getbyID(proID) {
            //console.log(proID);
            $('#Name').css('border-color', 'lightgrey');
            $('#Weight').css('bor");
                WriteLiteral(@"der-color', 'lightgrey');
            $('#UnitsInStock').css('border-color', 'lightgrey');
            $('#Price').css('border-color', 'lightgrey');
            $('#CateName').css('border-color', 'lightgrey');
            $.ajax({
                url: ""https://localhost:44307/api/ProductAPI/"" + proID,
                type: ""GET"",
                contentType: ""application/json;charset=UTF-8"",
                dataType: ""json"",
                success: function (result) {
                    console.log(result);
                    $('#ProductID').val(result.productId);
                    $('#Name').val(result.productName);
                    $('#Weight').val(result.weight);
                    $('#UnitsInStock').val(result.unitslnStock);
                    $('#Price').val(result.unitPrice);
                    $('#CateName').val(result.category.categoryId);

                    $('#myModal').modal('show');
                   
                    $('#btnUpdate').show();
                  ");
                WriteLiteral(@"  $('#btnAdd').hide();
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
            return false;
        }

        //function for updating employee's record
        function Update() {
            var res = validate();
            if (res == false) {
                return false;
            }
            var proObj = {
                ProductID: $('#ProductID').val(),
                productName: $('#Name').val(),
                Weight: $('#Weight').val(),
                UnitslnStock: $('#UnitsInStock').val(),
                UnitPrice: $('#Price').val(),
                CategoryId: $('#CateName').val(),
            };
            //console.log(proObj);
            $.ajax({
                url: ""https://localhost:44307/api/ProductAPI/"" + proObj.ProductID,
                data: JSON.stringify(proObj),
                type: ""PUT"",
                contentType: ""application/j");
                WriteLiteral(@"son;charset=utf-8"",
                dataType: ""json"",
                success: function (result) {
                    loadData();
                    $('#myModal').modal('hide');
                    $('#ProductID').val("""");
                    $('#Name').val("""");
                    $('#Weight').val("""");
                    $('#UnitsInStock').val("""");
                    $('#Price').val("""");
                   
                },
                error: function (errormessage) {
                    alert(errormessage.responseText);
                }
            });
        }

        //function for deleting employee's record
        function Delele(ID) {
            var ans = confirm(""Are you sure you want to delete this Record?"");
            if (ans) {
                $.ajax({
                    url: ""https://localhost:44307/api/ProductAPI/"" + ID,
                    type: ""DELETE"",
                    contentType: ""application/json;charset=UTF-8"",
                    dataType: ""j");
                WriteLiteral(@"son"",
                    success: function (result) {
                        loadData();
                    },
                    error: function (errormessage) {
                        alert(errormessage.responseText);
                    }
                });
            }
        }

        //Function for clearing the textboxes
        function clearTextBox() {
            $('#ProductID').val("""");
            $('#Name').val("""");
            $('#UnitsInStock').val("""");
            $('#Weight').val("""");
            $('#Price').val("""");
            //$('#CateName').val("""");
            $('#btnUpdate').hide();
            $('#btnAdd').show();
            $('#Name').css('border-color', 'lightgrey');
            $('#UnitsInStock').css('border-color', 'lightgrey');
            $('#Price').css('border-color', 'lightgrey');
            $('#CateName').css('border-color', 'lightgrey');
        }
        //Valdidation using jquery
        function validate() {
            var isValid =");
                WriteLiteral(@" true;
            if ($('#Name').val().trim() == """") {
                $('#Name').css('border-color', 'Red');
                isValid = false;
            }
            else {
                $('#Name').css('border-color', 'lightgrey');
            }
            if ($('#Weight').val().trim() == """") {
                $('#Weight').css('border-color', 'Red');
                isValid = false;
            }
            else {
                $('#Weight').css('border-color', 'lightgrey');
            }
            if ($('#UnitsInStock').val().trim() == """") {
                $('#UnitsInStock').css('border-color', 'Red');
                isValid = false;
            }
            else {
                $('#UnitsInStock').css('border-color', 'lightgrey');
            }
            if ($('#Price').val().trim() == """") {
                $('#Price').css('border-color', 'Red');
                isValid = false;
            }
            else {
                $('#Price').css('border-color', 'ligh");
                WriteLiteral("tgrey\');\r\n            }\r\n           \r\n            return isValid;\r\n        }\r\n    </script>\r\n");
            }
            );
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
